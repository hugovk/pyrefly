"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[6353],{26353:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"typing-for-python-developers","title":"Typing for Python Developers","description":"Get to know Python\'s Type System with working examples","source":"@site/docs/typing-for-python-developers.mdx","sourceDirName":".","slug":"/typing-for-python-developers","permalink":"/en/docs/typing-for-python-developers","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/pyrefly/edit/main/website/docs/typing-for-python-developers.mdx","tags":[],"version":"current","frontMatter":{"title":"Typing for Python Developers","description":"Get to know Python\'s Type System with working examples"},"sidebar":"docsSidebar","previous":{"title":"Introduction","permalink":"/en/docs/"},"next":{"title":"Python Typing for New Developers","permalink":"/en/docs/python-typing-for-beginners"}}');var r=t(74848),i=t(28453),l=t(31888);const a={title:"Typing for Python Developers",description:"Get to know Python's Type System with working examples"},o="Typing for Python Developers",c={},d=[{value:"Types with Inference",id:"types-with-inference",level:3},{value:"Where Inference Shines \u2728",id:"where-inference-shines-",level:3},{value:"When to Add Hints",id:"when-to-add-hints",level:3},{value:"Define Types Inline",id:"define-types-inline",level:2},{value:"The Basics",id:"the-basics",level:3},{value:"Functions",id:"functions",level:3},{value:"Advanced Types",id:"advanced-types",level:2},{value:"Composing Types",id:"composing-types",level:3},{value:"Unions &amp; Optional",id:"unions--optional",level:3},{value:"Generics",id:"generics",level:3},{value:"Protocols",id:"protocols",level:3},{value:"Structural Types",id:"structural-types",level:2},{value:"Dataclasses",id:"dataclasses",level:3},{value:"TypedDict",id:"typeddict",level:3},{value:"Overloads",id:"overloads",level:3},{value:"Typing Features and PEPS available in each Python Version",id:"typing-features-and-peps-available-in-each-python-version",level:2},{value:"Key Highlights Summary:",id:"key-highlights-summary",level:3}];function p(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"typing-for-python-developers",children:"Typing for Python Developers"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"A 5\u2011Minute Tour with Pyrefly."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Goal:"})," In five minutes you'll know how Python's static type system ",(0,r.jsx)(n.em,{children:"infers"}),", ",(0,r.jsx)(n.em,{children:"defines"}),", and ",(0,r.jsx)(n.em,{children:"composes"})," types\u2014and you'll have copy\u2011paste snippets to start using right away."]}),"\n",(0,r.jsxs)(n.p,{children:["If you are new to Python, check out our ",(0,r.jsx)(n.a,{href:"../python-typing-for-beginners/",children:"Python Typing for New Developers guide"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Python's type system allows you to annotate variables so you, your teammates and your type checker can find bugs before you run your code. Think of it as documentation that's automatically validated and will help your IDE help you."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"TL;DR"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Catch bugs ",(0,r.jsx)(n.strong,{children:"before"})," running the code."]}),"\n",(0,r.jsx)(n.li,{children:"Improve editor autocomplete & refactors."}),"\n",(0,r.jsx)(n.li,{children:"Turn your code into living documentation."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"types-with-inference",children:"Types with Inference"}),"\n",(0,r.jsxs)(n.p,{children:["Static analyzers can often ",(0,r.jsx)(n.em,{children:"infer"})," types from your code\u2014no annotations required. Pyrefly takes this a step further."]}),"\n",(0,r.jsx)(l.A,{sampleFilename:"basic_inference.py",codeSample:'# Basic Inference\nanswer = 42\nreveal_type(answer) # hover to reveal type\n\nfruits = ["apple", "banana", "cherry"]\nscores = {"math": 95, "science": 90}\n\ndef greet(name):\n  return f"Hello, {name}!"\n\nmessage = greet("World")\n'}),"\n",(0,r.jsx)(n.h3,{id:"where-inference-shines-",children:"Where Inference Shines \u2728"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Constant assignments (",(0,r.jsx)(n.code,{children:"answer = 42 -> int"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["List/tuple/dict literals with uniform elements (",(0,r.jsx)(n.code,{children:'names = ["A", "B"] -> list[str]'}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Return types if parameter types are annotated:"}),"\n"]}),"\n",(0,r.jsx)(l.A,{sampleFilename:"return_inference.py",codeSample:"def add(a: int, b: int):   # \u2705 param annotations\n  return a + b    # \ud83d\udd0d return inferred -> int\n"}),"\n",(0,r.jsx)(n.h3,{id:"when-to-add-hints",children:"When to Add Hints"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Public APIs (library or service boundaries)"}),"\n",(0,r.jsxs)(n.li,{children:["Mixed collections (",(0,r.jsx)(n.code,{children:"list[int | str]"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Callable signatures (decorators, callbacks)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"define-types-inline",children:"Define Types Inline"}),"\n",(0,r.jsx)(n.h3,{id:"the-basics",children:"The Basics"}),"\n",(0,r.jsx)(n.p,{children:"Python's built-in types can be used to write many type hints."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"built_in_types.py",codeSample:'# Example: Basic Types\n\nfrom typing import reveal_type\n\nage: int = 5\nreveal_type(age) # revealed type: int\n\nage = "oops"\n\nname: str = "John"\nreveal_type(name) # revealed type: str\n\nnumbers: list[int] = [1, 2, 3]\nreveal_type(numbers) # revealed type: list[int]\n\nnames: list[str] = ["John", "Jane"]\nreveal_type(names) # revealed type: list[str]\n\nperson: dict[str, str] = {"name": "John", "age": "30"}\nreveal_type(person) # revealed type: dict[str, str]\n\nis_admin = True\nreveal_type(is_admin) # revealed type: Literal[True]\n'}),"\n",(0,r.jsx)(n.h3,{id:"functions",children:"Functions"}),"\n",(0,r.jsx)(n.p,{children:"Defining the parameter and return types for a function doesn't just help prevent bugs, but it makes it easier to navigate in other files. You don't always need to define a return type - we'll do our best to infer it for you! We can't always get it right and an explicit return type will help your IDE navigate faster and more accurately."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"functions_types.py",codeSample:'# Example: Functions\n\nfrom typing import reveal_type\n\ndef greet(name: str) -> str:\n  return f"Hello, {name}!"\n\ngreet("Pyrefly")\n\ndef whatDoesThisFunctionReturnAgain(a: int, b: int):\n  return a + b\n\nreveal_type(whatDoesThisFunctionReturnAgain(2, 3)) # revealed type: int\n'}),"\n",(0,r.jsx)(n.h2,{id:"advanced-types",children:"Advanced Types"}),"\n",(0,r.jsx)(n.h3,{id:"composing-types",children:"Composing Types"}),"\n",(0,r.jsx)(n.p,{children:"The real power comes from composing smaller pieces into richer shapes."}),"\n",(0,r.jsx)(n.h3,{id:"unions--optional",children:"Unions & Optional"}),"\n",(0,r.jsx)(l.A,{sampleFilename:"unions_types.py",codeSample:"# Union and Optional Types\n\nfrom typing import Optional\n\ndef to_int(data: str | bytes | None) -> Optional[int]:\n  if data is None:\n      return None\n  if isinstance(data, bytes):\n      data = data.decode()\n  return int(data)\n"}),"\n",(0,r.jsx)(n.h3,{id:"generics",children:"Generics"}),"\n",(0,r.jsx)(n.p,{children:"Generics allow you to define reusable functions and classes that work with multiple types. This feature enables you to write more flexible and adaptable code."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"generics.py",codeSample:"# Example: Generic Classes\n\nfrom typing import reveal_type\n\nclass C[T]:\n  def __init__(self, x: T):\n      self.x = x\n  def box(self) -> list[T]:\n      return [self.x]\n\nc = C(0)\nreveal_type(c.box())  # revealed type: list[int]\n"}),"\n",(0,r.jsx)(n.h3,{id:"protocols",children:"Protocols"}),"\n",(0,r.jsx)(n.p,{children:"Protocols enable structural typing, which allows you to define interfaces without explicit inheritance. This feature helps you write more modular and composable code."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"protocols.py",codeSample:'# Example: Structural Typing with Protocols\n\nfrom typing import Iterable, Protocol\n\nclass Writer(Protocol):\n  def write(self) -> None: ...\n\nclass GoodWorld:\n  def write(self) -> None:\n      print("Hello world!")\n\nclass BadWorld:\n  pass\n\ndef f(writer: Writer):\n  pass\n\nf(GoodWorld()) # OK\nf(BadWorld())  # ERROR!\n'}),"\n",(0,r.jsx)(n.h2,{id:"structural-types",children:"Structural Types"}),"\n",(0,r.jsx)(n.p,{children:'Python also employs a structural type system, often referred to as "duck typing." This concept is based on the idea that if two objects have the same shape or attributes, they can be treated as being of the same type.'}),"\n",(0,r.jsx)(n.h3,{id:"dataclasses",children:"Dataclasses"}),"\n",(0,r.jsx)(n.p,{children:"Dataclasses allow you to create type-safe data structures while minimizing boilerplate."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"data_classes.py",codeSample:'# Example: Dataclasses\n\nfrom dataclasses import dataclass\n\n@dataclass\nclass Point:\n  x: float\n  y: float\n\nPoint(x=0.0, y=0.0)    # OK\nPoint(x=0.0, y="oops") # ERROR!\n'}),"\n",(0,r.jsx)(n.h3,{id:"typeddict",children:"TypedDict"}),"\n",(0,r.jsx)(n.p,{children:"Typed dictionaries enable you to define dictionaries with specific key-value types. This feature lets you bring type safety to ad-hoc dictionary structures without major refactoring."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"typed_dict.py",codeSample:'# Example: TypedDict\n\nfrom typing import TypedDict\n\nclass Movie(TypedDict):\n  name: str\n  year: int\n\ngood_movie: Movie = {"name": "Toy Story", "year": 1995} # OK\nbad_movie: Movie = {"name": "The Room", "year": "2003"}  # ERROR!\n'}),"\n",(0,r.jsx)(n.h3,{id:"overloads",children:"Overloads"}),"\n",(0,r.jsx)(n.p,{children:"Overloads allow you to define multiple function signatures for a single function. Like generics, this feature helps you write more flexible and adaptable code."}),"\n",(0,r.jsx)(l.A,{sampleFilename:"overloads.py",codeSample:'# Example: Overloads\n\nfrom typing import overload, reveal_type\n\n@overload\ndef f(x: int) -> int: ...\n\n@overload\ndef f(x: str) -> str: ...\n\ndef f(x: int | str) -> int | str:\n  return x\n\nreveal_type(f(0))  # revealed type: int\nreveal_type(f("")) # revealed type: str\n'}),"\n",(0,r.jsx)(n.h2,{id:"typing-features-and-peps-available-in-each-python-version",children:"Typing Features and PEPS available in each Python Version"}),"\n",(0,r.jsxs)(n.p,{children:["See the full list of features available in the Python type system ",(0,r.jsx)(n.a,{href:"../python-features-and-peps",children:"here"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"key-highlights-summary",children:"Key Highlights Summary:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Inference:"})," Python's static analyzers can infer types from your code, reducing the need for explicit annotations. This feature enhances code readability and helps catch bugs early."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Defining Types:"})," You can define types inline using Python's built-in types, which aids in documentation and improves IDE support."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Advanced Types:"})," The guide covers advanced concepts like composing types, using unions and optionals, generics, protocols, and structural types like dataclasses and TypedDict."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Practical Examples:"})," The guide includes examples of functions, generic classes, structural typing with protocols, and more, demonstrating how to apply these concepts in real-world scenarios."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},31888:(e,n,t)=>{t.d(n,{A:()=>a});var s=t(35363),r=t(96540),i=(t(32855),t(74848));const l=r.lazy((()=>Promise.all([t.e(1869),t.e(8285),t.e(4129)]).then(t.bind(t,14129))));function a(e){let{sampleFilename:n,codeSample:t=""}=e;if(null==n)throw"Missing sampleFilename. IDE services won't work properly.";const[a,o]=r.useState(!1),[c,d]=r.useState(!1),p=r.useRef(null);return r.useEffect((()=>{if("undefined"==typeof window)return;if(!p.current)return;const e=new IntersectionObserver((e=>{const n=e[0];o(n.isIntersecting),n.isIntersecting&&d(!0)}),{rootMargin:"500px 0px",threshold:.1});return e.observe(p.current),()=>e.disconnect()}),[]),(0,i.jsxs)("div",{ref:p,className:"x1717udv x1ghz6dp",children:[!c&&(0,i.jsx)("div",{className:"xh8yej3 x5yr21d x126k92a xysyzu8 x1tamke2 x1fbbalw xktofde",children:(0,i.jsx)("div",{className:"xb3r6kr x1n2onr6 xif65rj x1iwq0vh",children:t})}),c&&(0,i.jsx)("pre",{className:"xqid1ag x1rea2x4 x1n2onr6 x7ywyr2",children:(0,i.jsx)(s.A,{children:()=>(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{children:"Loading..."}),children:(0,i.jsx)(l,{sampleFilename:n,isCodeSnippet:!0,codeSample:t,isInViewport:a})})})})]})}},32855:(e,n,t)=>{t.d(n,{xk:()=>o});var s,r={};var i=function(){if(s)return r;s=1,Object.defineProperty(r,"__esModule",{value:!0}),r.styleq=void 0;var e=new WeakMap;function n(n){var t,s,r;return null!=n&&(t=!0===n.disableCache,s=!0===n.disableMix,r=n.transform),function(){for(var n=[],i="",l=null,a="",o=t?null:e,c=new Array(arguments.length),d=0;d<arguments.length;d++)c[d]=arguments[d];for(;c.length>0;){var p=c.pop();if(null!=p&&!1!==p)if(Array.isArray(p))for(var h=0;h<p.length;h++)c.push(p[h]);else{var y=null!=r?r(p):p;if(null!=y.$$css){var u="";if(null!=o&&o.has(y)){var f=o.get(y);null!=f&&(u=f[0],a=f[2],n.push.apply(n,f[1]),o=f[3])}else{var m=[];for(var v in y){var x=y[v];if("$$css"!==v)"string"==typeof x||null===x?n.includes(v)||(n.push(v),null!=o&&m.push(v),"string"==typeof x&&(u+=u?" "+x:x)):console.error("styleq: ".concat(v," typeof ").concat(String(x),' is not "string" or "null".'));else{var g=y[v];!0!==g&&(a=a?g+"; "+a:g)}}if(null!=o){var j=new WeakMap;o.set(y,[u,m,a,j]),o=j}}u&&(i=i?u+" "+i:u)}else if(s)null==l&&(l={}),l=Object.assign({},y,l);else{var w=null;for(var b in y){var T=y[b];void 0!==T&&(n.includes(b)||(null!=T&&(null==l&&(l={}),null==w&&(w={}),w[b]=T),n.push(b),o=null))}null!=w&&(l=Object.assign(w,l))}}}return[i,l,a]}}return(r.styleq=n()).factory=n,r}();const l=e=>new Error(`Unexpected 'stylex.${e}' call at runtime. Styles must be compiled by '@stylexjs/babel-plugin'.`),a=e=>l(`types.${e}`);function o(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s,r,l]=i.styleq(n),a={};return null!=s&&""!==s&&(a.className=s),null!=r&&Object.keys(r).length>0&&(a.style=r),null!=l&&""!==l&&(a["data-style-src"]=l),a}const c={angle:e=>{throw a("angle")},color:e=>{throw a("color")},url:e=>{throw a("url")},image:e=>{throw a("image")},integer:e=>{throw a("integer")},lengthPercentage:e=>{throw a("lengthPercentage")},length:e=>{throw a("length")},percentage:e=>{throw a("percentage")},number:e=>{throw a("number")},resolution:e=>{throw a("resolution")},time:e=>{throw a("time")},transformFunction:e=>{throw a("transformFunction")},transformList:e=>{throw a("transformList")}};function d(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const[s]=i.styleq(n);return s}d.attrs=function(){const{className:e,"data-style-src":n,style:t}=o(...arguments),s={};return null!=e&&""!==e&&(s.class=e),null!=t&&Object.keys(t).length>0&&(s.style=Object.keys(t).map((e=>`${e}:${t[e]};`)).join("")),null!=n&&""!==n&&(s["data-style-src"]=n),s},d.create=function(e){throw l("create")},d.createTheme=(e,n)=>{throw l("createTheme")},d.defineVars=function(e){throw l("defineVars")},d.firstThatWorks=function(){throw l("firstThatWorks")},d.keyframes=e=>{throw l("keyframes")},d.props=o,d.types=c},35363:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var s=t(9136),r=t(74848);function i(e){let{children:n,fallback:t}=e;return(0,s.default)()?(0,r.jsx)(r.Fragment,{children:n?.()}):t??null}}}]);